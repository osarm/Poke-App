let pokemonRepository=function(){let t=[],e=0;function o(t){return t.charAt(0).toUpperCase()+t.slice(1)}function n(e){"object"==typeof e&&"name"in e&&"detailsUrl"in e?t.push(e):console.error("Pokemon is not correct")}function i(){return t}function a(){return fetch(`https://pokeapi.co/api/v2/pokemon/?offset=${e}&limit=50`).then(function(t){return t.json()}).then(function(t){return Promise.all(t.results.map(function(t){return fetch(t.url).then(function(t){return t.json()}).then(function(e){let o={name:t.name,detailsUrl:t.url,imageUrl:e.sprites.other.dream_world.front_default,type:e.types[0].type.name};e.types.length>1&&"normal"===o.type&&(o.type=e.types[1].type.name),n(o)})}))})}function l(t){return fetch(t.detailsUrl).then(function(t){return t.json()}).then(function(e){t.imgUrl=e.sprites.other.dream_world.front_default,t.height=e.height/10,t.weight=e.weight/10,t.types=e.types,t.abilities=e.abilities}).catch(function(t){console.error(t)})}function r(t){l(t).then(function(){var e;e=t,$(".image-background").attr("class","image-background").addClass(e.type),$("#pokemonModalTitle").text(o(e.name)),$("#pokemonModalImage").attr("src",e.imgUrl).addClass("modal-image img-fluid"),$("#pokemonModalHeight").text(`Height: ${e.height} m`).addClass("pt-3"),$("#pokemonModalWeight").text(`Weight: ${e.weight} kg`),$("#pokemonModalTypes").text(`Types: ${e.types.map(t=>o(t.type.name)).join(", ")}`),$("#pokemonModalAbilities").text(`Abilities: ${e.abilities.map(t=>o(t.ability.name)).join(", ")}`)})}function s(t){let e=$("<div>").addClass("pokemon-div col-9 col-md-4 col-lg-3 border m-1 rounded-lg"+t.type),n=$("<button>").addClass("pokemon-button btn d-flex justify-content-between align-items-center").attr("data-toggle","modal").attr("data-target","#pokemonModal"),i=$("<img>").attr("src",t.imageUrl).attr("alt",`Image of ${t.name}`).addClass("pokemon-image img-fluid");n.append(i);let a=$("<span>").addClass("text-white").text(o(t.name));n.append(a),e.append(n),$(".row").append(e).addClass("justify-content-center"),n.click(function(){r(t)})}let c;(c=$("#search-bar")).on("input",function(){let e=c.val().toLowerCase(),o=t.filter(t=>t.name.toLowerCase().startsWith(e)),n=$(".row");n.empty(),0===o.length?n.text(`
Pokemon not Found`):o.forEach(t=>{s(t)})});let d=document.querySelector("#search-icon"),p=document.querySelector("#search-bar-container");d.addEventListener("click",function(){p.classList.toggle("d-none")}),$(window).on("scroll",function(){$(window).innerHeight()+$(window).scrollTop()>=$(document).height()&&(e+=50,a().then(function(){pokemonRepository.getAll().slice(-50).forEach(function(t){pokemonRepository.addListItem(t)})}))});let m=$("#scrollToTopButton");return $(window).scroll(function(){$(window).scrollTop()>20?m.show():m.hide()}),m.click(function(){$("html, body").animate({scrollTop:0},"slow")}),{add:n,getAll:i,addListItem:s,loadList:a,loadDetails:l,showDetails:r}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});